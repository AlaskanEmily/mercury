#-----------------------------------------------------------------------------#

MGNUCFLAGS=-g

# the following code tests for the presence of NU-Prolog
# by trying to invoke `np' and seeing if it the output
# starts with the text "NU-Prolog".
HAVE_NUPROLOG=$(shell \
	if [ "`expr \"`sh -c 'np' 2>&1 < /dev/null`\" : \(NU-Prolog\)`" \
		= NU-Prolog ]; \
	then \
		echo yes; \
	else \
		echo no; \
	fi)

#-----------------------------------------------------------------------------#

# .PRECIOUS: %.mod %.c %.o %_init.c %.no %.nu %_init.nl %_init.no

%_init.c: Entry

%.out: %
	{ [ -f $*.inp ] && cat $*.inp; } | ./$< > $@ 2>&1;

%.res: %.exp %.out
	-rm -f $@
	diff -u $*.exp $*.out > $@

#-----------------------------------------------------------------------------#

clean: clean_out clean_res

clean_mc: clean_c clean_o clean_out clean_res

clean_out:
	rm -f *.out

clean_exp:
	rm -f *.exp

clean_res:
	rm -f *.res

#-----------------------------------------------------------------------------#
