#-----------------------------------------------------------------------------#

main_target: check

include ../Mmake

#-----------------------------------------------------------------------------#

NONDETPROGS=	commit_bug disj_disj hello_again interpreter nasty_nondet \
		nondet_disj nondet_ite nondet_ite_2 nondetlive \
		partition semidet_lambda

DETPROGS=	arithmetic det_complicated_unify duplicate_label environment \
		higher_order parse_list petdr1 \
		semidet_map set_test string__format_test string_test \
		string_test_2 univ unreachable

# float_test doesn't work yet
NOTWORKING=	float_test

#
# The nondet tests use solutions/2, which is currently implemented only for GC
# grades.  So only include thoses tests if the grade is a GC grade.
#

ifeq ("$(findstring .gc, $(GRADE))","")
PROGS=$(DETPROGS)
else
PROGS=$(DETPROGS) $(NONDETPROGS)
endif

DEPENDS=$(PROGS:%=%.depend)
OUTS=	$(PROGS:%=%.out)
EXPS=	$(PROGS:%=%.exp)
RESS=	$(PROGS:%=%.res)
MODS=	$(PROGS:%=%.mod)

depend: $(DEPENDS)

check: $(EXPS) $(OUTS) $(RESS)

mods: $(MODS)

all:	$(PROGS)

#-----------------------------------------------------------------------------#
