# COMPLEX_NUMBER_DIR specifies the location of the complex number library,
# e.g. `/foo/bar/mercury-<version>/extra/complex_numbers'.
COMPLEX_NUMBER_DIR = ..

# The following stuff tells Mmake to use the complex number library
VPATH = $(COMPLEX_NUMBER_DIR):$(MMAKE_VPATH)
MCFLAGS = -I$(COMPLEX_NUMBER_DIR) $(EXTRA_MCFLAGS)
MLFLAGS = -R$(COMPLEX_NUMBER_DIR) -L$(COMPLEX_NUMBER_DIR) $(EXTRA_MLFLAGS)
MLLIBS = -lcomplex_lib $(EXTRA_MLLIBS)
C2INITFLAGS = $(COMPLEX_NUMBER_DIR)/complex_lib.init

MAIN_TARGET = complex_test.res

depend: complex_test.depend

complex_test.out: complex_test
	./complex_test > complex_test.out

complex_test.res: complex_test.out complex_test.exp
	diff -c complex_test.out complex_test.exp > complex_test.res

