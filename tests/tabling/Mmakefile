#-----------------------------------------------------------------------------#

main_target: check

include ../Mmake.common

#-----------------------------------------------------------------------------#

PROGS=	\
	boyer \
	fib \
	tc_loop \
	tc_minimal

#-----------------------------------------------------------------------------#

# at the moment tabling only works with conservative gc
GRADEFLAGS		=	--gc conservative

# With the Mercury system as of 17 September 1998,
# tc_minimal works on some machines even in the presence of a known bug
# if inlining is turned on, so we turn inlining off to make the test tougher.
MCFLAGS-tc_minimal	=	--no-inlining

# tc_loop is expected to abort, so we need to ignore the exit status
# (hence the leading `-')
tc_loop.out: tc_loop
	-./tc_loop > tc_loop.out 2>&1;

#-----------------------------------------------------------------------------#

DEPS=	$(PROGS:%=%.dep)
DEPENDS=$(PROGS:%=%.depend)
OUTS=	$(PROGS:%=%.out)
RESS=	$(PROGS:%=%.res)

#-----------------------------------------------------------------------------#

MMAKEFLAGS =

dep:	$(DEPS)

depend:	$(DEPENDS)

check:	$(OUTS) $(RESS)

all:	$(PROGS)

clean:

realclean:

#-----------------------------------------------------------------------------#
