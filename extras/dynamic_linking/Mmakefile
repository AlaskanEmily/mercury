# Use shared libraries, since they're needed for dynamic linking
MGNUCFLAGS = --pic-reg
MLFLAGS = --shared

# Link in the `-ldl' library (this may not be needed on some systems)
MLLIBS = -ldl

# enable C-level debugging
CFLAGS = -g
MLFLAGS += --no-strip

main_target: libdl
depend: dl.depend dl_test.depend hello.depend

check: dl_test libhello.so
	./dl_test > dl_test.out
	diff -c dl_test.out dl_test.exp
