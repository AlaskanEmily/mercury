#-----------------------------------------------------------------------------#

main_target: check

#-----------------------------------------------------------------------------#

PROGS=	pragma_c_code_unused_var unused_args_test singleton_test \
	unused_import pragma_source_file

#-----------------------------------------------------------------------------#

%.res:	%.exp %.err
	-rm -f $@
	diff -u $*.exp $*.err > $@

#-----------------------------------------------------------------------------#

DEPENDS=$(PROGS:%=%.depend)
ERRS=	$(PROGS:%=%.err)
RESS=	$(PROGS:%=%.res)

#-----------------------------------------------------------------------------#

unused_args_test.err:
	$(MC) -C --warn-unused-args --errorcheck-only \
		unused_args_test > unused_args_test.err 2>&1

unused_import.err:
	$(MC) -C --warn-interface-imports --errorcheck-only \
		unused_import > unused_import.err 2>&1

depend:	$(DEPENDS)

check:	$(ERRS) $(RESS)

all:	$(PROGS)

clean: clean_err clean_res

clean_mc: clean_c clean_o clean_err clean_res

clean_err:
	rm -f *.err

clean_res:
	rm -f *.res


#-----------------------------------------------------------------------------#
