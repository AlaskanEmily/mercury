/*
** Copyright (C) 1999 The University of Melbourne.
** This file may only be copied under the terms of the GNU Library General
** Public License - see the file COPYING.LIB in the Mercury distribution.
*/

/*
** mercury_bootstrap.h
**
** Temporary definitions only needed for bootstrapping and/or
** for backwards compatibility.  All of the definitions here
** will go away eventually, so don't use them!
*/

#ifndef	MERCURY_BOOTSTRAP_H
#define	MERCURY_BOOTSTRAP_H

#define	NONDET_FIXED_SIZE	MR_NONDET_FIXED_SIZE

#define succip			MR_succip
#define hp			MR_hp
#define sp			MR_sp
#define curfr			MR_curfr
#define maxfr			MR_maxfr

#define	detstackvar(n)		MR_stackvar(n)
#define	framevar(n)		MR_framevar((n) + 1)

#define	bt_prevfr(fr)		MR_prevfr_slot(fr)
#define	bt_redoip(fr)		MR_redoip_slot(fr)
#define	bt_redofr(fr)		MR_redofr_slot(fr)
#define	bt_succip(fr)		MR_succip_slot(fr)
#define	bt_succfr(fr)		MR_succfr_slot(fr)
#define	bt_prednm(fr)		MR_prednm_slot(fr)
#define	bt_var(fr, n)		MR_based_framevar(fr, (n) + 1)

#define	curprevfr		bt_prevfr(MR_curfr)
#define	curredoip		bt_redoip(MR_curfr)
#define	curredofr		bt_redofr(MR_curfr)
#define	cursuccip		bt_succip(MR_curfr)
#define	cursuccfr		bt_succfr(MR_curfr)
#define	curprednm		bt_prednm(MR_curfr)

/*
** This should be removed soon - the latest compiler does not generate it.
*/
#define modframe(redoip)						\
			do {						\
				curredoip = redoip;			\
			} while (0)

/*
** The code generated by Mercury 0.8 includes references to these macros.
*/
#define MR_OBTAIN_GLOBAL_C_LOCK()	MR_OBTAIN_GLOBAL_LOCK("pragma c code")
#define MR_RELEASE_GLOBAL_C_LOCK()	MR_RELEASE_GLOBAL_LOCK("pragma c code")


/*
** Generated code will create references to base_type_* which has been
** renamed.  Builtin types use hand-defined type_ctor_*, so we need to
** #define the old names for these structures so the stage 1 compiler
** will link.  The stage 2 compiler will just generate type_ctor_*
** references anyway, so then these #defines are not needed.
*/
#define MR_INIT_BASE_TYPE_INFO		MR_INIT_TYPE_CTOR_INFO

#define mercury_data_array__base_type_functors_array_1 \
	mercury_data_array__type_ctor_functors_array_1 

#define mercury_data_array__base_type_functors_array_1_struct \
	mercury_data_array__type_ctor_functors_array_1_struct

#define mercury_data_array__base_type_layout_array_1 \
	mercury_data_array__type_ctor_layout_array_1 

#define mercury_data_array__base_type_layout_array_1_struct \
	mercury_data_array__type_ctor_layout_array_1_struct


#define mercury_data_builtin__base_type_functors_c_pointer_0 \
	mercury_data_builtin__type_ctor_functors_c_pointer_0 

#define mercury_data_builtin__base_type_functors_c_pointer_0_struct \
	mercury_data_builtin__type_ctor_functors_c_pointer_0_struct

#define mercury_data_builtin__base_type_layout_c_pointer_0 \
	mercury_data_builtin__type_ctor_layout_c_pointer_0 

#define mercury_data_builtin__base_type_layout_c_pointer_0_struct \
	mercury_data_builtin__type_ctor_layout_c_pointer_0_struct


#define mercury_data_std_util__base_type_functors_type_info_0 \
	mercury_data_std_util__type_ctor_functors_type_info_0 

#define mercury_data_std_util__base_type_functors_type_info_0_struct \
	mercury_data_std_util__type_ctor_functors_type_info_0_struct

#define mercury_data_std_util__base_type_layout_type_info_0 \
	mercury_data_std_util__type_ctor_layout_type_info_0 

#define mercury_data_std_util__base_type_layout_type_info_0_struct \
	mercury_data_std_util__type_ctor_layout_type_info_0_struct


#define mercury_data_std_util__base_type_functors_univ_0 \
	mercury_data_std_util__type_ctor_functors_univ_0 

#define mercury_data_std_util__base_type_functors_univ_0_struct \
	mercury_data_std_util__type_ctor_functors_univ_0_struct

#define mercury_data_std_util__base_type_layout_univ_0 \
	mercury_data_std_util__type_ctor_layout_univ_0 

#define mercury_data_std_util__base_type_layout_univ_0_struct \
	mercury_data_std_util__type_ctor_layout_univ_0_struct

#define mercury_data___base_type_info_int_0_struct \
	mercury_data___type_ctor_info_int_0_struct

#define mercury_data___base_type_info_int_0 \
	mercury_data___type_ctor_info_int_0

#define mercury_data___base_type_info_string_0_struct \
	mercury_data___type_ctor_info_string_0_struct

#define mercury_data___base_type_info_string_0 \
	mercury_data___type_ctor_info_string_0

#define mercury_data___base_type_info_character_0 \
	mercury_data___type_ctor_info_character_0

#define mercury_data___base_type_info_character_0_struct \
	mercury_data___type_ctor_info_character_0_struct

#define mercury_data___base_type_info_float_0 \
	mercury_data___type_ctor_info_float_0

#define mercury_data___base_type_info_float_0_struct \
	mercury_data___type_ctor_info_float_0_struct

#define mercury_data___base_type_info_pred_0 \
	mercury_data___type_ctor_info_pred_0

#define mercury_data___base_type_info_pred_0_struct \
	mercury_data___type_ctor_info_pred_0_struct

#define mercury_data_private_builtin__base_type_info_type_info_1 \
	mercury_data_private_builtin__type_ctor_info_type_info_1

#define mercury_data_private_builtin__base_type_info_type_info_1_struct \
	mercury_data_private_builtin__type_ctor_info_type_info_1_struct


#endif	/* MERCURY_BOOTSTRAP_H */
