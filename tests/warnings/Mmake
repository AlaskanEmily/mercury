#-----------------------------------------------------------------------------#

main_target: check

#-----------------------------------------------------------------------------#

PROGS= pragma_c_code_unused_var unused_args_test

#-----------------------------------------------------------------------------#

%.res:	%.exp %.err
	-rm -f $@
	diff $*.exp $*.err > $@

#-----------------------------------------------------------------------------#

DEPENDS=$(PROGS:%=%.depend)
ERRS=	$(PROGS:%=%.err)
RESS=	$(PROGS:%=%.res)

#-----------------------------------------------------------------------------#
unused_args_test.err:
	$(MC) -C --warn-unused-args unused_args_test > unused_args_test.err 2>&1
	-rm -f unused_args_test.c

depend: $(DEPENDS)

check: $(ERRS) $(RESS)

all:	$(PROGS)

clean: clean_err clean_res

clean_mc: clean_c clean_o clean_err clean_res

clean_err:
	rm -f *.err

clean_res:
	rm -f *.res


#-----------------------------------------------------------------------------#
