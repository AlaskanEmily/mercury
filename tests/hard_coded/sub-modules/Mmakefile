#-----------------------------------------------------------------------------#
#
# This directory contains test cases for sub-modules,
# including both nested modules and seperate sub-modules.
#
#-----------------------------------------------------------------------------#

main_target: check

include ../../Mmake.common
-include ../../Mmake.params

#-----------------------------------------------------------------------------#

#
# Note: currently these test cases do not reliabily pass
# if you use parallel make.
#

PROGS=	\
	use_submodule \
	parent \
	parent2 \
	nested \
	nested2 \
	nested3 \
	class \
	nested_intermod_main

# The following test case is not enabled,
# because we do not yet pass it:
#	accessibility
#		Shows up a bug where the nested module accessibility check
#		reports some spurious errors.

MCFLAGS-nested_intermod	=	--intermodule-optimization
MCFLAGS-nested_intermod_main =	--intermodule-optimization

#-----------------------------------------------------------------------------#

DEPS=	$(PROGS:%=%.dep)
DEPENDS=$(PROGS:%=%.depend)
OUTS=	$(PROGS:%=%.out)
RESS=	$(PROGS:%=%.res)

#-----------------------------------------------------------------------------#

dep:	$(DEPS)

depend:	$(DEPENDS)

check:	$(OUTS) $(RESS)

all:	$(PROGS)

#-----------------------------------------------------------------------------#
